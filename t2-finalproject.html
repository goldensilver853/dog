<html>
<head>
<title>Game</title>
<style>
.inactive {
	visibility: hidden;
}
</style>
</head>
<body onkeypress="{main();}" onload="{go();}">
<div id="audio1"></div>
<img  id="vehicle"  src="car.png"  style="position:absolute; width:30px; height:30px; left:30px; top:10px">  
<br><br><br><br>
<img  id="cannon1"  src="cannon1.png"  style="position:absolute; width:30px; height:30px; left:500px; top:300px" /><img src="cannonball.png" id="ball1" style="position:absolute; width:10px; height:10px; left:500px; top:300px" /><br>
<img  id="cannon2"  src="cannon2.png"  style="position:absolute; width:30px; height:30px; left:895px; top:129px" /><img src="cannonball.png" id="ball2" style="position:absolute; width:10px; height:10px; left:895px; top:129px" /><br>
<img  id="cannon3"  src="cannon3.png"  style="position:absolute; width:30px; height:30px; left:789px; top:697px" /><img src="cannonball.png" id="ball3" style="position:absolute; width:10px; height:10px; left:789px; top:697px" /><br>
<img  id="cannon4"  src="cannon4.png"  style="position:absolute; width:30px; height:30px; left:103px; top:200px" /><img src="cannonball.png" id="ball4" style="position:absolute; width:10px; height:10px; left:103px; top:200px" /><br>
<img  id="cannon5"  src="cannon5.png"  style="position:absolute; width:30px; height:30px; left:1129px; top:760px" /><img src="cannonball.png" id="ball5" style="position:absolute; width:10px; height:10px; left:1129px; top:760px" /><br>
<div id="output">Score: 0</div>
<div id="level">Level: 1</div>
<div id="dog"></div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
<script>
var score = 0;
var level = 1;
var ballspeed = 0;
var diff = 0;
function go(){
	setInterval(cannonball, 5);
	setInterval(tempcalc, 10000);
}
function main(){
	if(score == 5){
	score = 0;
	level += 1;
	document.getElementById('level').innerHTML = 'Level: ' + level;
	document.getElementById('score').innerHTML = 'Score: ' + score;
	}
	if(event.keyCode==97){
	document.getElementById('vehicle').style.left  = parseInt(document.getElementById('vehicle').style.left) - 5 + 'px';
	// a key (left)
	}
	if(event.keyCode==119){
	document.getElementById('vehicle').style.top  = parseInt(document.getElementById('vehicle').style.top) - 5 + 'px';
	// w key (up)
	}
	if(event.keyCode==115){
	document.getElementById('vehicle').style.top  = parseInt(document.getElementById('vehicle').style.top) + 5 + 'px';
	//s key (down)
	}   
	if(event.keyCode==100){
	document.getElementById('vehicle').style.left  = parseInt(document.getElementById('vehicle').style.left) + 5 + 'px';
	//d key (right)
	}
	
	if (collide('vehicle', 'cannon1')  == true) {
	update();
	document.getElementById('output').innerHTML =  'Score: ' + score;
	document.getElementById('cannon1').style.left = Math.floor(Math.random() * screen.availWidth) + 1 + 'px';
	document.getElementById('cannon1').style.top  = Math.floor(Math.random() * screen.availHeight - 50) + 1 + 'px';
	document.getElementById('ball1').style.left = document.getElementById('cannon1').style.left;
	document.getElementById('ball1').style.top = document.getElementById('cannon1').style.top;
	document.getElementById('audio1').innerHTML = '<audio autoplay src="aah.wav" />';
	}	
	
	if (collide('vehicle', 'cannon2')  == true) {
	update();
	document.getElementById('output').innerHTML =  'Score: ' + score;
	document.getElementById('cannon2').style.left = Math.floor(Math.random() * screen.availWidth) + 1 + 'px';
	document.getElementById('cannon2').style.top  = Math.floor(Math.random() * screen.availHeight - 50) + 1 + 'px';
	document.getElementById('ball2').style.left = document.getElementById('cannon2').style.left;
	document.getElementById('ball2').style.top = document.getElementById('cannon2').style.top;
	document.getElementById('audio1').innerHTML = '<audio autoplay src="aah.wav" />';
	}	
	
	if (collide('vehicle', 'cannon3')  == true) {
	update();
	document.getElementById('output').innerHTML =  'Score: ' + score;
	document.getElementById('cannon3').style.left = Math.floor(Math.random() * screen.availWidth) + 1 + 'px';
	document.getElementById('cannon3').style.top  = Math.floor(Math.random() * screen.availHeight - 50) + 1 + 'px';
	document.getElementById('ball3').style.left = document.getElementById('cannon3').style.left;
	document.getElementById('ball3').style.top = document.getElementById('cannon3').style.top;
	document.getElementById('audio1').innerHTML = '<audio autoplay src="aah.wav" />';
	}	
	
	if (collide('vehicle', 'cannon4')  == true) {
	update();
	document.getElementById('output').innerHTML =  'Score: ' + score;
	document.getElementById('cannon4').style.left = Math.floor(Math.random() * screen.availWidth) + 1 + 'px';
	document.getElementById('cannon4').style.top  = Math.floor(Math.random() * screen.availHeight - 50) + 1 + 'px';
	document.getElementById('ball4').style.left = document.getElementById('cannon4').style.left;
	document.getElementById('ball4').style.top = document.getElementById('cannon4').style.top;
	document.getElementById('audio1').innerHTML = '<audio autoplay src="aah.wav" />';
	}	
	
	if (collide('vehicle', 'cannon5')  == true) {
	update();
	document.getElementById('output').innerHTML =  'Score: ' + score;
	document.getElementById('cannon5').style.left = Math.floor(Math.random() * screen.availWidth) + 1 + 'px';
	document.getElementById('cannon5').style.top  = Math.floor(Math.random() * screen.availHeight - 50) + 1 + 'px';
	document.getElementById('ball5').style.left = document.getElementById('cannon5').style.left;
	document.getElementById('ball5').style.top = document.getElementById('cannon5').style.top;
	document.getElementById('audio1').innerHTML = '<audio autoplay src="aah.wav" />';
	}
	
	
	if(document.getElementById('ball5').style.left <= '0px'){
		document.getElementById('ball5').style.left = document.getElementById('cannon5').style.left;;
	}
	if(document.getElementById('ball4').style.left <= '0px'){
		document.getElementById('ball4').style.left = document.getElementById('cannon4').style.left;;
	}
	if(document.getElementById('ball3').style.left <= '0px'){
		document.getElementById('ball3').style.left = document.getElementById('cannon3').style.left;;
	}
	if(document.getElementById('ball2').style.left <= '0px'){
		document.getElementById('ball2').style.left = document.getElementById('cannon2').style.left;;
	}
	if(document.getElementById('ball1').style.left <= '0px'){
		document.getElementById('ball1').style.left = document.getElementById('cannon1').style.left;;
	}
	
}
function collide(my1, my2){
   left1   = parseInt(document.getElementById(my1).style.left)
   right1  = left1 + parseInt(document.getElementById(my1).style.width)
   top1    = parseInt(document.getElementById(my1).style.top)   
   bottom1 = top1   + parseInt(document.getElementById(my1).style.height)
   left2   = parseInt(document.getElementById(my2).style.left)
   right2  = left2 + parseInt(document.getElementById(my2).style.width)
   top2    = parseInt(document.getElementById(my2).style.top)   
   bottom2 = top2   + parseInt(document.getElementById(my2).style.height)
   if ((right1  >=  left2  ) && (bottom1 >=  top2   ) && (left1   <=  right2 ) && (top1    <=  bottom2) ){
       return true;
   }
}
function update(){
	score += 1;
	ballspeed += 1;
}
function cannonball() {
    document.getElementById('ball1').style.left  = parseInt(document.getElementById('ball1').style.left) - 2 - ballspeed - (diff * 2) + 'px';
	document.getElementById('ball2').style.left  = parseInt(document.getElementById('ball2').style.left) - 3 - ballspeed - (diff * 2) + 'px';
	document.getElementById('ball3').style.left  = parseInt(document.getElementById('ball3').style.left) - 7 - ballspeed - (diff * 2) + 'px';
	document.getElementById('ball4').style.left  = parseInt(document.getElementById('ball4').style.left) - 2 - ballspeed - (diff * 2) + 'px';
	document.getElementById('ball5').style.left  = parseInt(document.getElementById('ball5').style.left) - 4 - ballspeed - (diff * 2) + 'px';
	
	if (collide('vehicle', 'ball1')  == true) {
	if ( document.getElementById('ball1').classList.contains('inactive') ){
	}
	else {
	document.getElementById('vehicle').style.left = '-5000px';
	alert('You have been shot!');
	location.reload();
	}
	}	
	if (collide('vehicle', 'ball2')  == true) {
	if ( document.getElementById('ball2').classList.contains('inactive') ){
	}
	else {
	document.getElementById('vehicle').style.left = '-5000px';
	alert('You have been shot!');
	location.reload();
	}
	}	
	if (collide('vehicle', 'ball3')  == true) {
	if ( document.getElementById('ball3').classList.contains('inactive') ){
	}
	else {
	document.getElementById('vehicle').style.left = '-5000px';
	alert('You have been shot!');
	location.reload();
	}
	}	
	if (collide('vehicle', 'ball4')  == true) {
	if ( document.getElementById('ball4').classList.contains('inactive') ){
	}
	else {
	document.getElementById('vehicle').style.left = '-5000px';
	alert('You have been shot!');
	location.reload();
	}
	}	
	if (collide('vehicle', 'ball5')  == true) {
	if ( document.getElementById('ball5').classList.contains('inactive') ){
	}
	else {
	document.getElementById('vehicle').style.left = '-5000px';
	alert('You have been shot!');
	location.reload();
	}
	}
}

function tempcalc() {
    document.getElementById("dog").innerHTML = "";
    var deviceID = "390045001547333438353733";
    var accessToken = "f636d55ac9a22efcdc8d1ad6ead3908865c5a16a";
    var varName = "lightvalue";
	var temp = 0;

    requestURL = "https://api.spark.io/v1/devices/" + deviceID + "/" + varName + "/?access_token=" + accessToken;
    $.getJSON(requestURL, function(json) {
             temp = json.result;
			 	if (temp > 119 && temp < 130){
					diff = 1;
					console.log("diff = 1");
				}
				if (temp > 129 && temp < 136){
					diff = 2;
					console.log("diff = 2");
				}
				if (temp > 135 && temp < 140){
					diff = 3;
					console.log("diff = 3");
				}
				if (temp > 139){
					diff = 4;
					console.log("diff = 4");
				} 
				if (temp < 120){
					diff = 0;
					console.log("diff = 0");
				}
			 console.log(temp);
             });
}
</script>
</body>
</html>